#!/usr/bin/env metal
#lang racket
; These lines are a comment and will be ignored.  The preceding lines
; are also ignored.

(label "start")
(asm "cli")
(asm "mov si, msg")
(asm "mov ah, 0x0e")
(dir "loop")
(asm "lodsb")
(asm "or al, al")
(asm "jz halt")
(asm "int 0x10")
(asm "jmp .loop")

(label "halt")
(asm "hlt")

(label "msg")
(db "Hello, World!")
